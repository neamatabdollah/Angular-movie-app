import{a as J,b as K,c as Q,d as X,e as Z,f as ee}from"./chunk-JOTNQ3FO.js";import"./chunk-AN7MBSHW.js";import{a as H}from"./chunk-P3HNPL7P.js";import{d as Y,e as q,f as G}from"./chunk-OXY52CCX.js";import{a as O}from"./chunk-GKTAGUVX.js";import{a as V,b as A}from"./chunk-ZSR23T52.js";import{a as L}from"./chunk-4DWQLRA4.js";import{a as z}from"./chunk-ORRKRFYI.js";import{f as j,h as B}from"./chunk-JYLBADAV.js";import{Ca as P,Ea as U,ia as F,ma as $,o as R,p as W,q as k,ua as N}from"./chunk-MMXOUGBB.js";import{Ba as x,Da as r,Eb as a,Fb as u,Gb as g,Ia as d,Oa as E,Sb as C,Ta as v,Tb as y,Ub as T,ba as S,ca as b,cb as s,hb as _,ib as f,jb as h,kb as o,lb as n,mb as m,qb as M,tb as w,ub as p}from"./chunk-2SLO6VUG.js";var I=(i,t)=>t.id;function te(i,t){if(i&1&&(o(0,"h2",23),a(1),n(),o(2,"p",24),a(3),C(4,"date"),n(),o(5,"div",25),m(6,"p-rating",26),o(7,"span",27),a(8),C(9,"number"),n()()),i&2){let e=p(2);r(),u(e.movie.title),r(2),g(" ",T(4,6,e.movie.release_date,"MMM dd, yyyy")," "),r(3),s("ngModel",e.getRatingStars())("readonly",!0)("stars",5),r(2),g("(",y(9,9,e.movie.vote_count)," votes)")}}function oe(i,t){if(i&1&&m(0,"p-chip",9),i&2){let e=t.$implicit;s("label",e.name)}}function ne(i,t){if(i&1&&(o(0,"div",15),m(1,"img",28),n()),i&2){let e=p(2);r(),s("src","https://image.tmdb.org/t/p/w200"+e.movie.production_companies[0].logo_path,x)("alt",e.movie.production_companies[0].name)}}function re(i,t){if(i&1&&(o(0,"div",16),m(1,"p-chip",29),n()),i&2){let e=p(2);r(),s("label",e.movie.production_companies[0].name)}}function ae(i,t){if(i&1&&(o(0,"div",17)(1,"a",30),m(2,"i",31),a(3," Website "),n()()),i&2){let e=p(2);r(),s("href",e.movie.homepage,x)}}function le(i,t){i&1&&(o(0,"h2",32),a(1,"Recommended Movies"),n())}function me(i,t){if(i&1){let e=M();o(0,"div",21)(1,"app-movie-card",33),w("click",function(){let l=S(e).$implicit,D=p(2);return b(D.navigateToDetails(l.id))}),n()()}if(i&2){let e=t.$implicit;r(),s("item",e)}}function se(i,t){i&1&&(o(0,"h2",32),a(1,"Reviews"),n())}function pe(i,t){if(i&1&&(o(0,"div",34)(1,"p")(2,"strong",35),a(3),n(),a(4," \u2022 "),o(5,"i",36),a(6),C(7,"date"),n()(),o(8,"p"),a(9),n()()),i&2){let e=t.$implicit;r(3),u(e.author),r(3),u(y(7,3,e.created_at)),r(3),u(e.content)}}function ce(i,t){if(i&1&&f(0,pe,10,5,"div",34,I),i&2){let e=p(2);h(e.reviews)}}function de(i,t){i&1&&(o(0,"p",22),a(1,"No reviews found."),n())}function ve(i,t){if(i&1){let e=M();o(0,"div",0)(1,"div",1)(2,"p-card",2),m(3,"img",3),o(4,"button",4),w("click",function(){S(e);let l=p();return b(l.toggleWishlist())}),n()()(),o(5,"div",5)(6,"p-card"),v(7,te,10,11,"ng-template",6),o(8,"p",7),a(9),n(),m(10,"p-divider"),o(11,"div",8),f(12,oe,1,1,"p-chip",9,I),n(),m(14,"p-divider"),o(15,"div",10)(16,"div",11)(17,"div",12)(18,"span",13),a(19,"Duration:"),n(),o(20,"span",14),a(21),n()()(),o(22,"div",11)(23,"div",12)(24,"span",13),a(25,"Languages:"),n(),o(26,"span",14),a(27,"English"),n()()()(),m(28,"p-divider"),v(29,ne,2,2,"div",15)(30,re,2,1,"div",16)(31,ae,4,1,"div",17),n()()(),o(32,"div",18)(33,"p-card",19),v(34,le,2,0,"ng-template",20),o(35,"div",10),f(36,me,2,1,"div",21,I),n()(),o(38,"p-card",19),v(39,se,2,0,"ng-template",20)(40,ce,2,0)(41,de,2,0,"p",22),n()()}if(i&2){let e=p();r(3),s("src",e.getImageUrl(e.movie.poster_path),x)("alt",e.movie.title),r(),s("label",e.isInWishlist()?"Remove from Wishlist":"Add to Wishlist")("icon",e.isInWishlist()?"pi pi-heart-fill":"pi pi-heart")("severity",e.isInWishlist()?"danger":"primary"),r(5),g(" ",e.movie.overview," "),r(3),h(e.movie.genres),r(9),g("",e.movie.runtime," Min."),r(8),_(e.movie.production_companies&&e.movie.production_companies.length>0?29:e.movie.production_companies&&e.movie.production_companies.length>0?30:-1),r(2),_(e.movie.homepage?31:-1),r(5),h(e.recommendations),r(4),_(e.reviews.length?40:41)}}var ie=class i{constructor(t,e,c,l,D,_e){this.route=t;this.movieService=e;this.languageService=c;this.wishlistService=l;this.messageService=D;this.router=_e}movie;recommendations=[];reviews=[];ngOnInit(){this.route.paramMap.subscribe(t=>{let e=Number(t.get("id")||"0");if(e){let c=this.languageService.language().code;this.movieService.getMovieDetails(e,c).subscribe({next:l=>this.movie=l,error:l=>console.error(l)}),this.movieService.getMovieRecommendations(e,c).subscribe({next:l=>{this.recommendations=l.results},error:l=>console.error(l)}),this.movieService.getMovieReviews(e).subscribe({next:l=>this.reviews=l.results,error:l=>console.error(l)})}})}getImageUrl(t){return this.movieService.getImageUrl(t??"")}isInWishlist(){return this.wishlistService.isInWishlist(this.movie.id,"movie")}toggleWishlist(){this.isInWishlist()?(this.wishlistService.removeFromWishlist(this.movie.id,"movie"),this.messageService.add({severity:"info",summary:"Removed",detail:`${this.movie.title} removed from wishlist`,life:3e3})):(this.wishlistService.addToWishlist(this.movie,"movie"),this.messageService.add({severity:"success",summary:"Added",detail:`${this.movie.title} added to wishlist`,life:3e3}))}navigateToDetails(t){this.router.navigate(["/movie",t])}getRatingStars(){let t=this.movie;return t?Math.round(t.vote_average/2):0}static \u0275fac=function(e){return new(e||i)(d(j),d(L),d(H),d(z),d(F),d(B))};static \u0275cmp=E({type:i,selectors:[["app-movie-details"]],decls:1,vars:1,consts:[[1,"grid","justify-center","px-4","pt-5"],[1,"col-12","sm:col-6","md:col-5"],[1,"w-full"],[1,"shadow-4","w-full",2,"border-radius","12px","box-shadow","0 4px 12px rgba(0, 0, 0, 0.15)",3,"src","alt"],["pButton","",1,"button-text","mt-3","w-full","shadow-3",3,"click","label","icon","severity"],[1,"col-12","sm:col-6","md:col-7"],["pTemplate","header",1,"px-3"],[1,"movie-overview","text-700","line-height-3","mt-0","mb-4","text-lg"],[1,"flex","flex-wrap","gap-2"],["styleClass","genre-chip",1,"bg-yellow-400",3,"label"],[1,"grid"],[1,"col-12","md:col-6"],[1,"flex","align-items-center","gap-2"],[1,"font-semibold","text-600"],[1,"text-900"],[1,"flex","flex-wrap","gap-3","mb-5","py-2"],[1,"mb-5"],[1,"my-5"],[1,"grid","justify-center","px-4"],[1,"mt-5"],["pTemplate","header"],[1,"col-6","sm:col-4","md:col-3","lg:col-2"],[1,"text-secondary"],[1,"mb-0","mt-5","px-3"],[1,"text-gray-400","mb-0","px-3"],[1,"flex","align-items-center","gap-3","mb-0","p-3"],["styleClass","custom-rating",3,"ngModel","readonly","stars"],[1,"text-600","font-semibold"],[1,"max-w-8rem","max-h-4rem",2,"object-fit","contain",3,"src","alt"],["styleClass","production-chip",1,"bg-blue-100",3,"label"],["target","_blank",1,"website-link","border-yellow-400","text-900","font-semibold","transition-colors","transition-duration-200","no-underline","border-1","border-round-xl","p-3",3,"href"],[1,"pi","pi-external-link","mr-2"],[1,"mb-2","px-3","line-height-3"],["type","movie",3,"click","item"],[1,"mb-4","p-3","border-round","border-1","shadow-1"],[1,"text-yellow-500","text-lg","pr-1"],[1,"text-sm","pl-1"]],template:function(e,c){e&1&&v(0,ve,42,10),e&2&&_(c.movie?0:-1)},dependencies:[k,W,R,O,A,V,$,U,P,N,K,J,X,Q,G,Y,q,ee,Z],styles:[".button-text[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.website-link[_ngcontent-%COMP%]:hover{background-color:#fde68a;color:#000}"]})};export{ie as MovieDetailsComponent};
