import{a as D}from"./chunk-NQOSUDED.js";import{a as R,b}from"./chunk-3TIHMZQL.js";import"./chunk-YCCOLYPH.js";import{a as E}from"./chunk-P3HNPL7P.js";import"./chunk-OXY52CCX.js";import{a as T}from"./chunk-GKTAGUVX.js";import"./chunk-GWELZMDX.js";import"./chunk-F2X3VGZZ.js";import"./chunk-ZSR23T52.js";import{a as L}from"./chunk-4DWQLRA4.js";import"./chunk-ORRKRFYI.js";import{h as P}from"./chunk-JYLBADAV.js";import{q as S}from"./chunk-MMXOUGBB.js";import{Da as m,Eb as d,Gb as y,Ia as u,Mb as w,Oa as C,Ta as x,ba as p,ca as v,cb as _,hb as M,ib as h,jb as f,kb as n,lb as r,qb as g,tb as l,ub as a}from"./chunk-2SLO6VUG.js";var F=()=>[20],V=(t,i)=>i.id;function k(t,i){if(t&1){let e=g();n(0,"app-movie-card",6),l("click",function(){let c=p(e).$implicit,s=a(2);return v(s.navigateToDetails(c.id))}),r()}if(t&2){let e=i.$implicit;_("item",e)}}function Q(t,i){if(t&1&&(n(0,"div",1),h(1,k,1,1,"app-movie-card",5,V),r()),t&2){let e=a();m(),f(e.searchResults)}}function j(t,i){if(t&1&&(n(0,"p",2),d(1),r()),t&2){let e=a();m(),y(" No results found for \u201C",e.searchQuery,`\u201D.
`)}}function N(t,i){if(t&1){let e=g();n(0,"app-movie-card",6),l("click",function(){let c=p(e).$implicit,s=a(2);return v(s.navigateToDetails(c.id))}),r()}if(t&2){let e=i.$implicit;_("item",e)}}function $(t,i){if(t&1){let e=g();n(0,"div",3)(1,"h1",7),d(2,"\u{1F3AC} Now Playing"),r(),n(3,"div",1),h(4,N,1,1,"app-movie-card",5,V),r(),n(6,"div",8)(7,"p-paginator",9),l("onPageChange",function(c){p(e);let s=a();return v(s.onPageChange(c))}),r()()()}if(t&2){let e=a();m(4),f(e.movies),m(3),_("rows",20)("totalRecords",e.totalResults)("rowsPerPageOptions",w(3,F))}}function O(t,i){t&1&&(n(0,"p",4),d(1,"Loading Movies list..."),r())}var I=class t{constructor(i,e,o){this.movieService=i;this.router=e;this.language=o}movies=[];totalResults=0;currentPage=1;searchResults=[];searchQuery="";ngOnInit(){this.getMovies()}getMovies(){let i=this.language.language().code;this.movieService.getNowPlayingMovies(this.currentPage,i).subscribe({next:e=>{this.movies=e.results,this.totalResults=e.total_results},error:e=>console.error(e)})}onPageChange(i){this.currentPage=i.page+1,this.getMovies(),window.scrollTo({top:0,behavior:"smooth"})}navigateToDetails(i){this.router.navigate(["/movie",i])}handleSearch(i){if(this.searchQuery=i.trim(),this.searchQuery.length===0){this.searchResults=[],this.getMovies();return}let e=this.language.language().code;this.movieService.searchMovies(this.searchQuery,this.currentPage,e).subscribe(o=>{this.searchResults=o.results})}static \u0275fac=function(e){return new(e||t)(u(L),u(P),u(E))};static \u0275cmp=C({type:t,selectors:[["app-movies-list"]],decls:5,vars:1,consts:[[3,"search"],[1,"flex","justify-content-between","flex-wrap","gap-2","py-10",2,"width","95%","margin","auto"],[1,"text-center","text-lg","text-gray-500","py-10"],[1,"px-4","py-10"],[1,"p-text-500"],["type","movie",3,"item"],["type","movie",3,"click","item"],[1,"text-3xl","font-bold","mb-6","text-gray-900"],[1,"flex","justify-center","mt-10"],[3,"onPageChange","rows","totalRecords","rowsPerPageOptions"]],template:function(e,o){e&1&&(n(0,"app-search",0),l("search",function(s){return o.handleSearch(s)}),r(),x(1,Q,3,0,"div",1)(2,j,2,1,"p",2)(3,$,8,4,"div",3)(4,O,2,0,"p",4)),e&2&&(m(),M(o.searchResults.length>0?1:o.searchQuery.length>0?2:o.movies.length>0?3:4))},dependencies:[S,T,b,R,D],encapsulation:2})};export{I as MoviesListComponent};
